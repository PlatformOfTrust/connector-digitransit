<?xml version="1.0" encoding="UTF-8"?>
<robot generator="Robot 3.2.2 (Python 3.8.5 on darwin)" generated="20200930 16:09:53.680" rpa="false">
<suite id="s1" name="Connector Tests" source="/Users/daniilsmirnov/digitransit-connector/robottests/connectors/digitransit/connector_tests.robot">
<test id="s1-t1" name="fetch, 200">
<kw name="Get Body">
<assign>
<var>${body}</var>
</assign>
<kw name="Copy Dictionary" library="Collections">
<doc>Returns a copy of the given dictionary.</doc>
<arguments>
<arg>${BROKER_BODY}</arg>
<arg>deepcopy=True</arg>
</arguments>
<assign>
<var>${body}</var>
</assign>
<msg timestamp="20200930 16:09:53.925" level="INFO">${body} = {'productCode': 'digitransit-4-test', 'parameters': {'operator': {'idLocal': '0022', '@type': 'Organization'}, 'vehicle': {'idLocal': '00876', '@type': 'Vehicle'}}}</msg>
<status status="PASS" starttime="20200930 16:09:53.925" endtime="20200930 16:09:53.925"></status>
</kw>
<kw name="Get Current Date" library="DateTime">
<doc>Returns current local or UTC time with an optional increment.</doc>
<arguments>
<arg>time_zone=UTC</arg>
<arg>result_format=%Y-%m-%dT%H:%M:%S+00:00</arg>
</arguments>
<assign>
<var>${now}</var>
</assign>
<msg timestamp="20200930 16:09:53.926" level="INFO">${now} = 2020-09-30T13:09:53+00:00</msg>
<status status="PASS" starttime="20200930 16:09:53.925" endtime="20200930 16:09:53.926"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>timestamp</arg>
<arg>${now}</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:53.926" endtime="20200930 16:09:53.926"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>&amp;{kwargs}</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:53.926" endtime="20200930 16:09:53.926"></status>
</kw>
<kw name="Evaluate" library="BuiltIn">
<doc>Evaluates the given expression in Python and returns the result.</doc>
<arguments>
<arg>json.dumps(${body})</arg>
<arg>json</arg>
</arguments>
<assign>
<var>${json_string}</var>
</assign>
<msg timestamp="20200930 16:09:53.927" level="INFO">${json_string} = {"productCode": "digitransit-4-test", "parameters": {"operator": {"idLocal": "0022", "@type": "Organization"}, "vehicle": {"idLocal": "00876", "@type": "Vehicle"}}, "timestamp": "2020-09-30T13:09:53+0...</msg>
<status status="PASS" starttime="20200930 16:09:53.926" endtime="20200930 16:09:53.927"></status>
</kw>
<msg timestamp="20200930 16:09:53.927" level="INFO">${body} = {'productCode': 'digitransit-4-test', 'parameters': {'operator': {'idLocal': '0022', '@type': 'Organization'}, 'vehicle': {'idLocal': '00876', '@type': 'Vehicle'}}, 'timestamp': '2020-09-30T13:09:53+0...</msg>
<status status="PASS" starttime="20200930 16:09:53.924" endtime="20200930 16:09:53.927"></status>
</kw>
<kw name="Fetch Data Product">
<arguments>
<arg>${body}</arg>
</arguments>
<kw name="Calculate Pot Signature" library="PoTLib">
<arguments>
<arg>${body}</arg>
<arg>${CLIENT_SECRET}</arg>
</arguments>
<assign>
<var>${signature}</var>
</assign>
<msg timestamp="20200930 16:09:53.928" level="INFO">${signature} = nCekrVtuDiuvY7U9m0jb8Vw+XKwzh2bGDDULIO+RhpM=</msg>
<status status="PASS" starttime="20200930 16:09:53.927" endtime="20200930 16:09:53.928"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${signature}</arg>
</arguments>
<msg timestamp="20200930 16:09:53.928" level="INFO">nCekrVtuDiuvY7U9m0jb8Vw+XKwzh2bGDDULIO+RhpM=</msg>
<status status="PASS" starttime="20200930 16:09:53.928" endtime="20200930 16:09:53.928"></status>
</kw>
<kw name="Set Headers" library="REST">
<tags>
<tag>settings</tag>
</tags>
<doc>*Sets new request headers or updates the existing.*</doc>
<arguments>
<arg>{"x-pot-signature": "${signature}", "x-app-token": "${APP_TOKEN}"}</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:53.928" endtime="20200930 16:09:53.928"></status>
</kw>
<kw name="Post" library="REST">
<tags>
<tag>http</tag>
</tags>
<doc>*Sends a POST request to the endpoint.*</doc>
<arguments>
<arg>${API_PATH}</arg>
<arg>${body}</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:53.929" endtime="20200930 16:09:56.103"></status>
</kw>
<kw name="Output Schema" library="REST">
<tags>
<tag>I/O</tag>
</tags>
<doc>*Outputs JSON Schema to terminal or a file.*</doc>
<arguments>
<arg>response body</arg>
</arguments>
<msg timestamp="20200930 16:09:56.103" level="INFO">
{
    "type": "object",
    "properties": {
        "@context": {
            "type": "string",
            "default": "https://standards-ontotest.oftrust.net/v2/Context/DataProductOutput/VehicleInformation/"
        },
        "data": {
            "type": "object",
            "properties": {
                "transportationRoute": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "@type": {
                                "type": "string"
                            },
                            "operator": {
                                "type": "object",
                                "properties": {
                                    "@type": {
                                        "type": "string"
                                    },
                                    "idLocal": {
                                        "type": "string"
                                    }
                                },
                                "required": [
                                    "@type",
                                    "idLocal"
                                ]
                            },
                            "vehicle": {
                                "type": "object",
                                "properties": {
                                    "@type": {
                                        "type": "string"
                                    },
                                    "idLocal": {
                                        "type": "string"
                                    },
                                    "location": {
                                        "type": "object",
                                        "properties": {
                                            "@type": {
                                                "type": "string"
                                            },
                                            "latitude": {
                                                "type": "number"
                                            },
                                            "longitude": {
                                                "type": "number"
                                            }
                                        },
                                        "required": [
                                            "@type",
                                            "latitude",
                                            "longitude"
                                        ]
                                    }
                                },
                                "required": [
                                    "@type",
                                    "idLocal",
                                    "location"
                                ]
                            }
                        },
                        "required": [
                            "@type",
                            "operator",
                            "vehicle"
                        ]
                    },
                    "default": [
                        {
                            "@type": "TransportationRoute",
                            "operator": {
                                "@type": "Organization",
                                "idLocal": "0022"
                            },
                            "vehicle": {
                                "@type": "Vehicle",
                                "idLocal": "00876",
                                "location": {
                                    "@type": "Location",
                                    "latitude": 60.247576,
                                    "longitude": 25.011345
                                }
                            }
                        }
                    ]
                }
            },
            "required": [
                "transportationRoute"
            ]
        },
        "signature": {
            "type": "object",
            "properties": {
                "type": {
                    "type": "string",
                    "default": "RsaSignature2018"
                },
                "created": {
                    "type": "string",
                    "default": "2020-09-30T13:09:56+00:00"
                },
                "creator": {
                    "type": "string",
                    "default": "https://api-external-test.oftrust.net/digitransit/translator/v2/public.key"
                },
                "signatureValue": {
                    "type": "string",
                    "default": "HsbcjkVUbpPPtEJZD+NwV9zycFO0RHuNMUOlWZib3pPjxn/twhsFZmbD4uyBmux4mkcy8xAthXHvrkH0fZf0BDowRS9mKHB7jaissUKvGqvfEjWYs+bsUDNP+PZSUYiUrTrbNN+uE6381sx9WF5+Vc+o3fLHmBALUQ3s7z/pQEu0jj3ixsAmleUY0lWPy3XOY09sbve73QNikIM1/yhLW5FgIl4Ufz00S184IFiv97AovfsQCZqgoO+lZJPGpODifFx+rKFsxGQTBnguHbPmtuBRNBhSg40EuruBmoiNlYo9qJzCEjTdnNg74EprMYPPpVoAJyTidXKjKnlN7p5rRRxk5A3yiTJ2Si3KGJhiKu0ii6EeVVVrhW3/hWDXcno8vtH/fHF3kF8Yel+pD7iB9aE3O1SWv++pUt85+npaK1F8WPB1WhvqDQZG8KAOuX8cdkVum/j+XywRqEVtD62dvcE7NgTlkN3fkfE6iV2Swxa2VaydYZopf5btsa4LlNeqHeecaq6buMG56iOPSOZBikvmKg+BEZUvGSM3Z6KTAkqOTh7jbmn/JbGqBOqOCJt5/xcP7rvJtHEcMA9x9JQWq3+etzfNlAHgU1yCE5lBP27A4RSPkpDkgY0cuas9vvJZCrdl8zlen51gg+rFSYU0HripOypo7BASoa1SxaBMSHw="
                }
            },
            "required": [
                "created",
                "creator",
                "signatureValue",
                "type"
            ]
        }
    },
    "required": [
        "@context",
        "data",
        "signature"
    ]
}</msg>
<status status="PASS" starttime="20200930 16:09:56.103" endtime="20200930 16:09:56.112"></status>
</kw>
<status status="PASS" starttime="20200930 16:09:53.927" endtime="20200930 16:09:56.112"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response status</arg>
<arg>200</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:56.112" endtime="20200930 16:09:56.113"></status>
</kw>
<kw name="String" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON string.*</doc>
<arguments>
<arg>response body @context</arg>
<arg>https://standards-ontotest.oftrust.net/v2/Context/DataProductOutput/VehicleInformation/</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:56.113" endtime="20200930 16:09:56.113"></status>
</kw>
<kw name="Object" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON object.*</doc>
<arguments>
<arg>response body data</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:56.114" endtime="20200930 16:09:56.115"></status>
</kw>
<kw name="Array" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON array.*</doc>
<arguments>
<arg>response body data transportationRoute</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:56.115" endtime="20200930 16:09:56.116"></status>
</kw>
<kw name="String" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON string.*</doc>
<arguments>
<arg>response body data transportationRoute 0 @type</arg>
<arg>TransportationRoute</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:56.116" endtime="20200930 16:09:56.116"></status>
</kw>
<kw name="Object" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON object.*</doc>
<arguments>
<arg>response body data transportationRoute 0 operator</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:56.117" endtime="20200930 16:09:56.117"></status>
</kw>
<kw name="Object" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON object.*</doc>
<arguments>
<arg>response body data transportationRoute 0 vehicle location</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:56.117" endtime="20200930 16:09:56.118"></status>
</kw>
<tags>
<tag>bug-0001</tag>
</tags>
<status status="PASS" starttime="20200930 16:09:53.924" endtime="20200930 16:09:56.118" critical="yes"></status>
</test>
<test id="s1-t2" name="fetch, 422, Missing data for timestamp required field">
<kw name="Get Body">
<assign>
<var>${body}</var>
</assign>
<kw name="Copy Dictionary" library="Collections">
<doc>Returns a copy of the given dictionary.</doc>
<arguments>
<arg>${BROKER_BODY}</arg>
<arg>deepcopy=True</arg>
</arguments>
<assign>
<var>${body}</var>
</assign>
<msg timestamp="20200930 16:09:56.120" level="INFO">${body} = {'productCode': 'digitransit-4-test', 'parameters': {'operator': {'idLocal': '0022', '@type': 'Organization'}, 'vehicle': {'idLocal': '00876', '@type': 'Vehicle'}}}</msg>
<status status="PASS" starttime="20200930 16:09:56.119" endtime="20200930 16:09:56.120"></status>
</kw>
<kw name="Get Current Date" library="DateTime">
<doc>Returns current local or UTC time with an optional increment.</doc>
<arguments>
<arg>time_zone=UTC</arg>
<arg>result_format=%Y-%m-%dT%H:%M:%S+00:00</arg>
</arguments>
<assign>
<var>${now}</var>
</assign>
<msg timestamp="20200930 16:09:56.121" level="INFO">${now} = 2020-09-30T13:09:56+00:00</msg>
<status status="PASS" starttime="20200930 16:09:56.120" endtime="20200930 16:09:56.121"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>timestamp</arg>
<arg>${now}</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:56.121" endtime="20200930 16:09:56.121"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>&amp;{kwargs}</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:56.122" endtime="20200930 16:09:56.122"></status>
</kw>
<kw name="Evaluate" library="BuiltIn">
<doc>Evaluates the given expression in Python and returns the result.</doc>
<arguments>
<arg>json.dumps(${body})</arg>
<arg>json</arg>
</arguments>
<assign>
<var>${json_string}</var>
</assign>
<msg timestamp="20200930 16:09:56.122" level="INFO">${json_string} = {"productCode": "digitransit-4-test", "parameters": {"operator": {"idLocal": "0022", "@type": "Organization"}, "vehicle": {"idLocal": "00876", "@type": "Vehicle"}}, "timestamp": "2020-09-30T13:09:56+0...</msg>
<status status="PASS" starttime="20200930 16:09:56.122" endtime="20200930 16:09:56.122"></status>
</kw>
<msg timestamp="20200930 16:09:56.123" level="INFO">${body} = {'productCode': 'digitransit-4-test', 'parameters': {'operator': {'idLocal': '0022', '@type': 'Organization'}, 'vehicle': {'idLocal': '00876', '@type': 'Vehicle'}}, 'timestamp': '2020-09-30T13:09:56+0...</msg>
<status status="PASS" starttime="20200930 16:09:56.119" endtime="20200930 16:09:56.123"></status>
</kw>
<kw name="Pop From Dictionary" library="Collections">
<doc>Pops the given ``key`` from the ``dictionary`` and returns its value.</doc>
<arguments>
<arg>${body}</arg>
<arg>timestamp</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:56.123" endtime="20200930 16:09:56.123"></status>
</kw>
<kw name="Fetch Data Product">
<arguments>
<arg>${body}</arg>
</arguments>
<kw name="Calculate Pot Signature" library="PoTLib">
<arguments>
<arg>${body}</arg>
<arg>${CLIENT_SECRET}</arg>
</arguments>
<assign>
<var>${signature}</var>
</assign>
<msg timestamp="20200930 16:09:56.124" level="INFO">${signature} = IWWNQhfIbHNICLDhKlctkGrmpEhl0WyH91C/fdwK2yU=</msg>
<status status="PASS" starttime="20200930 16:09:56.123" endtime="20200930 16:09:56.124"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${signature}</arg>
</arguments>
<msg timestamp="20200930 16:09:56.124" level="INFO">IWWNQhfIbHNICLDhKlctkGrmpEhl0WyH91C/fdwK2yU=</msg>
<status status="PASS" starttime="20200930 16:09:56.124" endtime="20200930 16:09:56.124"></status>
</kw>
<kw name="Set Headers" library="REST">
<tags>
<tag>settings</tag>
</tags>
<doc>*Sets new request headers or updates the existing.*</doc>
<arguments>
<arg>{"x-pot-signature": "${signature}", "x-app-token": "${APP_TOKEN}"}</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:56.124" endtime="20200930 16:09:56.125"></status>
</kw>
<kw name="Post" library="REST">
<tags>
<tag>http</tag>
</tags>
<doc>*Sends a POST request to the endpoint.*</doc>
<arguments>
<arg>${API_PATH}</arg>
<arg>${body}</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:56.125" endtime="20200930 16:09:56.269"></status>
</kw>
<kw name="Output Schema" library="REST">
<tags>
<tag>I/O</tag>
</tags>
<doc>*Outputs JSON Schema to terminal or a file.*</doc>
<arguments>
<arg>response body</arg>
</arguments>
<msg timestamp="20200930 16:09:56.270" level="INFO">
{
    "type": "object",
    "properties": {
        "error": {
            "type": "object",
            "properties": {
                "status": {
                    "type": "integer",
                    "default": 422
                },
                "message": {
                    "type": "object",
                    "properties": {
                        "timestamp": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            },
                            "default": [
                                "Missing data for required field."
                            ]
                        }
                    },
                    "required": [
                        "timestamp"
                    ]
                }
            },
            "required": [
                "message",
                "status"
            ]
        }
    },
    "required": [
        "error"
    ]
}</msg>
<status status="PASS" starttime="20200930 16:09:56.269" endtime="20200930 16:09:56.272"></status>
</kw>
<status status="PASS" starttime="20200930 16:09:56.123" endtime="20200930 16:09:56.272"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response status</arg>
<arg>422</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:56.272" endtime="20200930 16:09:56.273"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response body error status</arg>
<arg>422</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:56.274" endtime="20200930 16:09:56.274"></status>
</kw>
<kw name="String" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON string.*</doc>
<arguments>
<arg>response body error message timestamp 0</arg>
<arg>Missing data for required field.</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:56.275" endtime="20200930 16:09:56.275"></status>
</kw>
<tags>
<tag>bug-0001</tag>
</tags>
<status status="PASS" starttime="20200930 16:09:56.119" endtime="20200930 16:09:56.276" critical="yes"></status>
</test>
<test id="s1-t3" name="fetch, 422, Missing data for parameters required field">
<kw name="Get Body">
<assign>
<var>${body}</var>
</assign>
<kw name="Copy Dictionary" library="Collections">
<doc>Returns a copy of the given dictionary.</doc>
<arguments>
<arg>${BROKER_BODY}</arg>
<arg>deepcopy=True</arg>
</arguments>
<assign>
<var>${body}</var>
</assign>
<msg timestamp="20200930 16:09:56.278" level="INFO">${body} = {'productCode': 'digitransit-4-test', 'parameters': {'operator': {'idLocal': '0022', '@type': 'Organization'}, 'vehicle': {'idLocal': '00876', '@type': 'Vehicle'}}}</msg>
<status status="PASS" starttime="20200930 16:09:56.277" endtime="20200930 16:09:56.278"></status>
</kw>
<kw name="Get Current Date" library="DateTime">
<doc>Returns current local or UTC time with an optional increment.</doc>
<arguments>
<arg>time_zone=UTC</arg>
<arg>result_format=%Y-%m-%dT%H:%M:%S+00:00</arg>
</arguments>
<assign>
<var>${now}</var>
</assign>
<msg timestamp="20200930 16:09:56.279" level="INFO">${now} = 2020-09-30T13:09:56+00:00</msg>
<status status="PASS" starttime="20200930 16:09:56.278" endtime="20200930 16:09:56.279"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>timestamp</arg>
<arg>${now}</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:56.279" endtime="20200930 16:09:56.279"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>&amp;{kwargs}</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:56.280" endtime="20200930 16:09:56.280"></status>
</kw>
<kw name="Evaluate" library="BuiltIn">
<doc>Evaluates the given expression in Python and returns the result.</doc>
<arguments>
<arg>json.dumps(${body})</arg>
<arg>json</arg>
</arguments>
<assign>
<var>${json_string}</var>
</assign>
<msg timestamp="20200930 16:09:56.281" level="INFO">${json_string} = {"productCode": "digitransit-4-test", "parameters": {"operator": {"idLocal": "0022", "@type": "Organization"}, "vehicle": {"idLocal": "00876", "@type": "Vehicle"}}, "timestamp": "2020-09-30T13:09:56+0...</msg>
<status status="PASS" starttime="20200930 16:09:56.280" endtime="20200930 16:09:56.281"></status>
</kw>
<msg timestamp="20200930 16:09:56.281" level="INFO">${body} = {'productCode': 'digitransit-4-test', 'parameters': {'operator': {'idLocal': '0022', '@type': 'Organization'}, 'vehicle': {'idLocal': '00876', '@type': 'Vehicle'}}, 'timestamp': '2020-09-30T13:09:56+0...</msg>
<status status="PASS" starttime="20200930 16:09:56.277" endtime="20200930 16:09:56.281"></status>
</kw>
<kw name="Pop From Dictionary" library="Collections">
<doc>Pops the given ``key`` from the ``dictionary`` and returns its value.</doc>
<arguments>
<arg>${body}</arg>
<arg>parameters</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:56.281" endtime="20200930 16:09:56.282"></status>
</kw>
<kw name="Fetch Data Product">
<arguments>
<arg>${body}</arg>
</arguments>
<kw name="Calculate Pot Signature" library="PoTLib">
<arguments>
<arg>${body}</arg>
<arg>${CLIENT_SECRET}</arg>
</arguments>
<assign>
<var>${signature}</var>
</assign>
<msg timestamp="20200930 16:09:56.283" level="INFO">${signature} = gfVwt7rm3/HAIRR+NhVML1dvqSqtVIOmTcTNODqOiK4=</msg>
<status status="PASS" starttime="20200930 16:09:56.282" endtime="20200930 16:09:56.283"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${signature}</arg>
</arguments>
<msg timestamp="20200930 16:09:56.283" level="INFO">gfVwt7rm3/HAIRR+NhVML1dvqSqtVIOmTcTNODqOiK4=</msg>
<status status="PASS" starttime="20200930 16:09:56.283" endtime="20200930 16:09:56.283"></status>
</kw>
<kw name="Set Headers" library="REST">
<tags>
<tag>settings</tag>
</tags>
<doc>*Sets new request headers or updates the existing.*</doc>
<arguments>
<arg>{"x-pot-signature": "${signature}", "x-app-token": "${APP_TOKEN}"}</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:56.284" endtime="20200930 16:09:56.284"></status>
</kw>
<kw name="Post" library="REST">
<tags>
<tag>http</tag>
</tags>
<doc>*Sends a POST request to the endpoint.*</doc>
<arguments>
<arg>${API_PATH}</arg>
<arg>${body}</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:56.284" endtime="20200930 16:09:56.737"></status>
</kw>
<kw name="Output Schema" library="REST">
<tags>
<tag>I/O</tag>
</tags>
<doc>*Outputs JSON Schema to terminal or a file.*</doc>
<arguments>
<arg>response body</arg>
</arguments>
<msg timestamp="20200930 16:09:56.738" level="INFO">
{
    "type": "object",
    "properties": {
        "error": {
            "type": "object",
            "properties": {
                "message": {
                    "type": "string",
                    "default": "External translator returns an invalid response."
                },
                "status": {
                    "type": "integer",
                    "default": 502
                },
                "translator_response": {
                    "type": "object",
                    "properties": {
                        "status": {
                            "type": "integer",
                            "default": 422
                        },
                        "data": {
                            "type": "object",
                            "properties": {
                                "error": {
                                    "type": "object",
                                    "properties": {
                                        "status": {
                                            "type": "integer",
                                            "default": 422
                                        },
                                        "message": {
                                            "type": "object",
                                            "properties": {
                                                "parameters": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "default": [
                                                        "Missing data for required field."
                                                    ]
                                                },
                                                "parameters.operator": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "default": [
                                                        "Missing data for required field."
                                                    ]
                                                },
                                                "parameters.vehicle": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "default": [
                                                        "Missing data for required field."
                                                    ]
                                                },
                                                "parameters.operator.idLocal": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "default": [
                                                        "Missing data for required field."
                                                    ]
                                                },
                                                "parameters.vehicle.idLocal": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "default": [
                                                        "Missing data for required field."
                                                    ]
                                                },
                                                "parameters.operator.@type": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "default": [
                                                        "Missing data for required field."
                                                    ]
                                                },
                                                "parameters.vehicle.@type": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "default": [
                                                        "Missing data for required field."
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "parameters",
                                                "parameters.operator",
                                                "parameters.operator.@type",
                                                "parameters.operator.idLocal",
                                                "parameters.vehicle",
                                                "parameters.vehicle.@type",
                                                "parameters.vehicle.idLocal"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "status"
                                    ]
                                }
                            },
                            "required": [
                                "error"
                            ]
                        }
                    },
                    "required": [
                        "data",
                        "status"
                    ]
                }
            },
            "required": [
                "message",
                "status",
                "translator_response"
            ]
        }
    },
    "required": [
        "error"
    ]
}</msg>
<status status="PASS" starttime="20200930 16:09:56.738" endtime="20200930 16:09:56.745"></status>
</kw>
<status status="PASS" starttime="20200930 16:09:56.282" endtime="20200930 16:09:56.745"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response status</arg>
<arg>502</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:56.745" endtime="20200930 16:09:56.746"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response body error status</arg>
<arg>502</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:56.746" endtime="20200930 16:09:56.747"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response body error translator_response status</arg>
<arg>422</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:56.747" endtime="20200930 16:09:56.748"></status>
</kw>
<kw name="String" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON string.*</doc>
<arguments>
<arg>response body error translator_response data error message parameters 0</arg>
<arg>Missing data for required field.</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:56.748" endtime="20200930 16:09:56.749"></status>
</kw>
<tags>
<tag>bug-0002</tag>
</tags>
<status status="PASS" starttime="20200930 16:09:56.276" endtime="20200930 16:09:56.749" critical="yes"></status>
</test>
<test id="s1-t4" name="fetch, 422, Missing data for operator required field">
<kw name="Get Body">
<assign>
<var>${body}</var>
</assign>
<kw name="Copy Dictionary" library="Collections">
<doc>Returns a copy of the given dictionary.</doc>
<arguments>
<arg>${BROKER_BODY}</arg>
<arg>deepcopy=True</arg>
</arguments>
<assign>
<var>${body}</var>
</assign>
<msg timestamp="20200930 16:09:56.751" level="INFO">${body} = {'productCode': 'digitransit-4-test', 'parameters': {'operator': {'idLocal': '0022', '@type': 'Organization'}, 'vehicle': {'idLocal': '00876', '@type': 'Vehicle'}}}</msg>
<status status="PASS" starttime="20200930 16:09:56.750" endtime="20200930 16:09:56.751"></status>
</kw>
<kw name="Get Current Date" library="DateTime">
<doc>Returns current local or UTC time with an optional increment.</doc>
<arguments>
<arg>time_zone=UTC</arg>
<arg>result_format=%Y-%m-%dT%H:%M:%S+00:00</arg>
</arguments>
<assign>
<var>${now}</var>
</assign>
<msg timestamp="20200930 16:09:56.751" level="INFO">${now} = 2020-09-30T13:09:56+00:00</msg>
<status status="PASS" starttime="20200930 16:09:56.751" endtime="20200930 16:09:56.751"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>timestamp</arg>
<arg>${now}</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:56.752" endtime="20200930 16:09:56.752"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>&amp;{kwargs}</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:56.752" endtime="20200930 16:09:56.752"></status>
</kw>
<kw name="Evaluate" library="BuiltIn">
<doc>Evaluates the given expression in Python and returns the result.</doc>
<arguments>
<arg>json.dumps(${body})</arg>
<arg>json</arg>
</arguments>
<assign>
<var>${json_string}</var>
</assign>
<msg timestamp="20200930 16:09:56.753" level="INFO">${json_string} = {"productCode": "digitransit-4-test", "parameters": {"operator": {"idLocal": "0022", "@type": "Organization"}, "vehicle": {"idLocal": "00876", "@type": "Vehicle"}}, "timestamp": "2020-09-30T13:09:56+0...</msg>
<status status="PASS" starttime="20200930 16:09:56.752" endtime="20200930 16:09:56.753"></status>
</kw>
<msg timestamp="20200930 16:09:56.753" level="INFO">${body} = {'productCode': 'digitransit-4-test', 'parameters': {'operator': {'idLocal': '0022', '@type': 'Organization'}, 'vehicle': {'idLocal': '00876', '@type': 'Vehicle'}}, 'timestamp': '2020-09-30T13:09:56+0...</msg>
<status status="PASS" starttime="20200930 16:09:56.750" endtime="20200930 16:09:56.753"></status>
</kw>
<kw name="Pop From Dictionary" library="Collections">
<doc>Pops the given ``key`` from the ``dictionary`` and returns its value.</doc>
<arguments>
<arg>${body["parameters"]}</arg>
<arg>operator</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:56.753" endtime="20200930 16:09:56.754"></status>
</kw>
<kw name="Fetch Data Product">
<arguments>
<arg>${body}</arg>
</arguments>
<kw name="Calculate Pot Signature" library="PoTLib">
<arguments>
<arg>${body}</arg>
<arg>${CLIENT_SECRET}</arg>
</arguments>
<assign>
<var>${signature}</var>
</assign>
<msg timestamp="20200930 16:09:56.755" level="INFO">${signature} = gMJDO1c16MfReDH+T+jiLLjTKm9Qz3DBmvuA2Yt+3O8=</msg>
<status status="PASS" starttime="20200930 16:09:56.754" endtime="20200930 16:09:56.755"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${signature}</arg>
</arguments>
<msg timestamp="20200930 16:09:56.755" level="INFO">gMJDO1c16MfReDH+T+jiLLjTKm9Qz3DBmvuA2Yt+3O8=</msg>
<status status="PASS" starttime="20200930 16:09:56.755" endtime="20200930 16:09:56.755"></status>
</kw>
<kw name="Set Headers" library="REST">
<tags>
<tag>settings</tag>
</tags>
<doc>*Sets new request headers or updates the existing.*</doc>
<arguments>
<arg>{"x-pot-signature": "${signature}", "x-app-token": "${APP_TOKEN}"}</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:56.755" endtime="20200930 16:09:56.756"></status>
</kw>
<kw name="Post" library="REST">
<tags>
<tag>http</tag>
</tags>
<doc>*Sends a POST request to the endpoint.*</doc>
<arguments>
<arg>${API_PATH}</arg>
<arg>${body}</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:56.756" endtime="20200930 16:09:57.301"></status>
</kw>
<kw name="Output Schema" library="REST">
<tags>
<tag>I/O</tag>
</tags>
<doc>*Outputs JSON Schema to terminal or a file.*</doc>
<arguments>
<arg>response body</arg>
</arguments>
<msg timestamp="20200930 16:09:57.302" level="INFO">
{
    "type": "object",
    "properties": {
        "error": {
            "type": "object",
            "properties": {
                "message": {
                    "type": "string",
                    "default": "External translator returns an invalid response."
                },
                "status": {
                    "type": "integer",
                    "default": 502
                },
                "translator_response": {
                    "type": "object",
                    "properties": {
                        "status": {
                            "type": "integer",
                            "default": 422
                        },
                        "data": {
                            "type": "object",
                            "properties": {
                                "error": {
                                    "type": "object",
                                    "properties": {
                                        "status": {
                                            "type": "integer",
                                            "default": 422
                                        },
                                        "message": {
                                            "type": "object",
                                            "properties": {
                                                "parameters.operator": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "default": [
                                                        "Missing data for required field."
                                                    ]
                                                },
                                                "parameters.operator.idLocal": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "default": [
                                                        "Missing data for required field."
                                                    ]
                                                },
                                                "parameters.operator.@type": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "default": [
                                                        "Missing data for required field."
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "parameters.operator",
                                                "parameters.operator.@type",
                                                "parameters.operator.idLocal"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "status"
                                    ]
                                }
                            },
                            "required": [
                                "error"
                            ]
                        }
                    },
                    "required": [
                        "data",
                        "status"
                    ]
                }
            },
            "required": [
                "message",
                "status",
                "translator_response"
            ]
        }
    },
    "required": [
        "error"
    ]
}</msg>
<status status="PASS" starttime="20200930 16:09:57.301" endtime="20200930 16:09:57.305"></status>
</kw>
<status status="PASS" starttime="20200930 16:09:56.754" endtime="20200930 16:09:57.306"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response status</arg>
<arg>502</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:57.306" endtime="20200930 16:09:57.307"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response body error status</arg>
<arg>502</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:57.307" endtime="20200930 16:09:57.307"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response body error translator_response status</arg>
<arg>422</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:57.308" endtime="20200930 16:09:57.308"></status>
</kw>
<kw name="String" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON string.*</doc>
<arguments>
<arg>response body error translator_response data error message parameters.operator 0</arg>
<arg>Missing data for required field.</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:57.308" endtime="20200930 16:09:57.309"></status>
</kw>
<kw name="String" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON string.*</doc>
<arguments>
<arg>response body error translator_response data error message parameters.operator.idLocal 0</arg>
<arg>Missing data for required field.</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:57.309" endtime="20200930 16:09:57.310"></status>
</kw>
<kw name="String" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON string.*</doc>
<arguments>
<arg>response body error translator_response data error message parameters.operator.@type 0</arg>
<arg>Missing data for required field.</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:57.310" endtime="20200930 16:09:57.311"></status>
</kw>
<tags>
<tag>bug-0003</tag>
</tags>
<status status="PASS" starttime="20200930 16:09:56.749" endtime="20200930 16:09:57.311" critical="yes"></status>
</test>
<test id="s1-t5" name="fetch, 422, Missing data for vehicle required field">
<kw name="Get Body">
<assign>
<var>${body}</var>
</assign>
<kw name="Copy Dictionary" library="Collections">
<doc>Returns a copy of the given dictionary.</doc>
<arguments>
<arg>${BROKER_BODY}</arg>
<arg>deepcopy=True</arg>
</arguments>
<assign>
<var>${body}</var>
</assign>
<msg timestamp="20200930 16:09:57.313" level="INFO">${body} = {'productCode': 'digitransit-4-test', 'parameters': {'operator': {'idLocal': '0022', '@type': 'Organization'}, 'vehicle': {'idLocal': '00876', '@type': 'Vehicle'}}}</msg>
<status status="PASS" starttime="20200930 16:09:57.313" endtime="20200930 16:09:57.313"></status>
</kw>
<kw name="Get Current Date" library="DateTime">
<doc>Returns current local or UTC time with an optional increment.</doc>
<arguments>
<arg>time_zone=UTC</arg>
<arg>result_format=%Y-%m-%dT%H:%M:%S+00:00</arg>
</arguments>
<assign>
<var>${now}</var>
</assign>
<msg timestamp="20200930 16:09:57.314" level="INFO">${now} = 2020-09-30T13:09:57+00:00</msg>
<status status="PASS" starttime="20200930 16:09:57.314" endtime="20200930 16:09:57.314"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>timestamp</arg>
<arg>${now}</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:57.314" endtime="20200930 16:09:57.314"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>&amp;{kwargs}</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:57.314" endtime="20200930 16:09:57.315"></status>
</kw>
<kw name="Evaluate" library="BuiltIn">
<doc>Evaluates the given expression in Python and returns the result.</doc>
<arguments>
<arg>json.dumps(${body})</arg>
<arg>json</arg>
</arguments>
<assign>
<var>${json_string}</var>
</assign>
<msg timestamp="20200930 16:09:57.315" level="INFO">${json_string} = {"productCode": "digitransit-4-test", "parameters": {"operator": {"idLocal": "0022", "@type": "Organization"}, "vehicle": {"idLocal": "00876", "@type": "Vehicle"}}, "timestamp": "2020-09-30T13:09:57+0...</msg>
<status status="PASS" starttime="20200930 16:09:57.315" endtime="20200930 16:09:57.315"></status>
</kw>
<msg timestamp="20200930 16:09:57.316" level="INFO">${body} = {'productCode': 'digitransit-4-test', 'parameters': {'operator': {'idLocal': '0022', '@type': 'Organization'}, 'vehicle': {'idLocal': '00876', '@type': 'Vehicle'}}, 'timestamp': '2020-09-30T13:09:57+0...</msg>
<status status="PASS" starttime="20200930 16:09:57.312" endtime="20200930 16:09:57.316"></status>
</kw>
<kw name="Pop From Dictionary" library="Collections">
<doc>Pops the given ``key`` from the ``dictionary`` and returns its value.</doc>
<arguments>
<arg>${body["parameters"]}</arg>
<arg>vehicle</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:57.316" endtime="20200930 16:09:57.316"></status>
</kw>
<kw name="Fetch Data Product">
<arguments>
<arg>${body}</arg>
</arguments>
<kw name="Calculate Pot Signature" library="PoTLib">
<arguments>
<arg>${body}</arg>
<arg>${CLIENT_SECRET}</arg>
</arguments>
<assign>
<var>${signature}</var>
</assign>
<msg timestamp="20200930 16:09:57.317" level="INFO">${signature} = cC1L+i1k0u1JdvUVcdSJDCIdo7TK5cO6fR82MOOrFjY=</msg>
<status status="PASS" starttime="20200930 16:09:57.317" endtime="20200930 16:09:57.317"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${signature}</arg>
</arguments>
<msg timestamp="20200930 16:09:57.317" level="INFO">cC1L+i1k0u1JdvUVcdSJDCIdo7TK5cO6fR82MOOrFjY=</msg>
<status status="PASS" starttime="20200930 16:09:57.317" endtime="20200930 16:09:57.317"></status>
</kw>
<kw name="Set Headers" library="REST">
<tags>
<tag>settings</tag>
</tags>
<doc>*Sets new request headers or updates the existing.*</doc>
<arguments>
<arg>{"x-pot-signature": "${signature}", "x-app-token": "${APP_TOKEN}"}</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:57.317" endtime="20200930 16:09:57.318"></status>
</kw>
<kw name="Post" library="REST">
<tags>
<tag>http</tag>
</tags>
<doc>*Sends a POST request to the endpoint.*</doc>
<arguments>
<arg>${API_PATH}</arg>
<arg>${body}</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:57.318" endtime="20200930 16:09:57.638"></status>
</kw>
<kw name="Output Schema" library="REST">
<tags>
<tag>I/O</tag>
</tags>
<doc>*Outputs JSON Schema to terminal or a file.*</doc>
<arguments>
<arg>response body</arg>
</arguments>
<msg timestamp="20200930 16:09:57.639" level="INFO">
{
    "type": "object",
    "properties": {
        "error": {
            "type": "object",
            "properties": {
                "message": {
                    "type": "string",
                    "default": "External translator returns an invalid response."
                },
                "status": {
                    "type": "integer",
                    "default": 502
                },
                "translator_response": {
                    "type": "object",
                    "properties": {
                        "status": {
                            "type": "integer",
                            "default": 422
                        },
                        "data": {
                            "type": "object",
                            "properties": {
                                "error": {
                                    "type": "object",
                                    "properties": {
                                        "status": {
                                            "type": "integer",
                                            "default": 422
                                        },
                                        "message": {
                                            "type": "object",
                                            "properties": {
                                                "parameters.vehicle": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "default": [
                                                        "Missing data for required field."
                                                    ]
                                                },
                                                "parameters.vehicle.idLocal": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "default": [
                                                        "Missing data for required field."
                                                    ]
                                                },
                                                "parameters.vehicle.@type": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "default": [
                                                        "Missing data for required field."
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "parameters.vehicle",
                                                "parameters.vehicle.@type",
                                                "parameters.vehicle.idLocal"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "status"
                                    ]
                                }
                            },
                            "required": [
                                "error"
                            ]
                        }
                    },
                    "required": [
                        "data",
                        "status"
                    ]
                }
            },
            "required": [
                "message",
                "status",
                "translator_response"
            ]
        }
    },
    "required": [
        "error"
    ]
}</msg>
<status status="PASS" starttime="20200930 16:09:57.638" endtime="20200930 16:09:57.643"></status>
</kw>
<status status="PASS" starttime="20200930 16:09:57.316" endtime="20200930 16:09:57.643"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response status</arg>
<arg>502</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:57.644" endtime="20200930 16:09:57.644"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response body error status</arg>
<arg>502</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:57.645" endtime="20200930 16:09:57.645"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response body error translator_response status</arg>
<arg>422</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:57.645" endtime="20200930 16:09:57.646"></status>
</kw>
<kw name="String" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON string.*</doc>
<arguments>
<arg>response body error translator_response data error message parameters.vehicle 0</arg>
<arg>Missing data for required field.</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:57.646" endtime="20200930 16:09:57.647"></status>
</kw>
<kw name="String" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON string.*</doc>
<arguments>
<arg>response body error translator_response data error message parameters.vehicle.idLocal 0</arg>
<arg>Missing data for required field.</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:57.647" endtime="20200930 16:09:57.648"></status>
</kw>
<kw name="String" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON string.*</doc>
<arguments>
<arg>response body error translator_response data error message parameters.vehicle.@type 0</arg>
<arg>Missing data for required field.</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:57.648" endtime="20200930 16:09:57.649"></status>
</kw>
<tags>
<tag>bug-0004</tag>
</tags>
<status status="PASS" starttime="20200930 16:09:57.312" endtime="20200930 16:09:57.649" critical="yes"></status>
</test>
<test id="s1-t6" name="fetch, 422, Empty operator">
<kw name="Get Body">
<assign>
<var>${body}</var>
</assign>
<kw name="Copy Dictionary" library="Collections">
<doc>Returns a copy of the given dictionary.</doc>
<arguments>
<arg>${BROKER_BODY}</arg>
<arg>deepcopy=True</arg>
</arguments>
<assign>
<var>${body}</var>
</assign>
<msg timestamp="20200930 16:09:57.651" level="INFO">${body} = {'productCode': 'digitransit-4-test', 'parameters': {'operator': {'idLocal': '0022', '@type': 'Organization'}, 'vehicle': {'idLocal': '00876', '@type': 'Vehicle'}}}</msg>
<status status="PASS" starttime="20200930 16:09:57.651" endtime="20200930 16:09:57.651"></status>
</kw>
<kw name="Get Current Date" library="DateTime">
<doc>Returns current local or UTC time with an optional increment.</doc>
<arguments>
<arg>time_zone=UTC</arg>
<arg>result_format=%Y-%m-%dT%H:%M:%S+00:00</arg>
</arguments>
<assign>
<var>${now}</var>
</assign>
<msg timestamp="20200930 16:09:57.652" level="INFO">${now} = 2020-09-30T13:09:57+00:00</msg>
<status status="PASS" starttime="20200930 16:09:57.651" endtime="20200930 16:09:57.652"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>timestamp</arg>
<arg>${now}</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:57.652" endtime="20200930 16:09:57.652"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>&amp;{kwargs}</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:57.652" endtime="20200930 16:09:57.652"></status>
</kw>
<kw name="Evaluate" library="BuiltIn">
<doc>Evaluates the given expression in Python and returns the result.</doc>
<arguments>
<arg>json.dumps(${body})</arg>
<arg>json</arg>
</arguments>
<assign>
<var>${json_string}</var>
</assign>
<msg timestamp="20200930 16:09:57.653" level="INFO">${json_string} = {"productCode": "digitransit-4-test", "parameters": {"operator": {"idLocal": "0022", "@type": "Organization"}, "vehicle": {"idLocal": "00876", "@type": "Vehicle"}}, "timestamp": "2020-09-30T13:09:57+0...</msg>
<status status="PASS" starttime="20200930 16:09:57.653" endtime="20200930 16:09:57.653"></status>
</kw>
<msg timestamp="20200930 16:09:57.653" level="INFO">${body} = {'productCode': 'digitransit-4-test', 'parameters': {'operator': {'idLocal': '0022', '@type': 'Organization'}, 'vehicle': {'idLocal': '00876', '@type': 'Vehicle'}}, 'timestamp': '2020-09-30T13:09:57+0...</msg>
<status status="PASS" starttime="20200930 16:09:57.650" endtime="20200930 16:09:57.653"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body["parameters"]}</arg>
<arg>operator=@{EMPTY}</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:57.654" endtime="20200930 16:09:57.654"></status>
</kw>
<kw name="Fetch Data Product">
<arguments>
<arg>${body}</arg>
</arguments>
<kw name="Calculate Pot Signature" library="PoTLib">
<arguments>
<arg>${body}</arg>
<arg>${CLIENT_SECRET}</arg>
</arguments>
<assign>
<var>${signature}</var>
</assign>
<msg timestamp="20200930 16:09:57.655" level="INFO">${signature} = x5Tkw4EuJrA/U0+ixcCG9Bo5NHWeu9FEtl14ROqOenI=</msg>
<status status="PASS" starttime="20200930 16:09:57.655" endtime="20200930 16:09:57.655"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${signature}</arg>
</arguments>
<msg timestamp="20200930 16:09:57.656" level="INFO">x5Tkw4EuJrA/U0+ixcCG9Bo5NHWeu9FEtl14ROqOenI=</msg>
<status status="PASS" starttime="20200930 16:09:57.655" endtime="20200930 16:09:57.656"></status>
</kw>
<kw name="Set Headers" library="REST">
<tags>
<tag>settings</tag>
</tags>
<doc>*Sets new request headers or updates the existing.*</doc>
<arguments>
<arg>{"x-pot-signature": "${signature}", "x-app-token": "${APP_TOKEN}"}</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:57.656" endtime="20200930 16:09:57.656"></status>
</kw>
<kw name="Post" library="REST">
<tags>
<tag>http</tag>
</tags>
<doc>*Sends a POST request to the endpoint.*</doc>
<arguments>
<arg>${API_PATH}</arg>
<arg>${body}</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:57.656" endtime="20200930 16:09:57.996"></status>
</kw>
<kw name="Output Schema" library="REST">
<tags>
<tag>I/O</tag>
</tags>
<doc>*Outputs JSON Schema to terminal or a file.*</doc>
<arguments>
<arg>response body</arg>
</arguments>
<msg timestamp="20200930 16:09:57.997" level="INFO">
{
    "type": "object",
    "properties": {
        "error": {
            "type": "object",
            "properties": {
                "message": {
                    "type": "string",
                    "default": "External translator returns an invalid response."
                },
                "status": {
                    "type": "integer",
                    "default": 502
                },
                "translator_response": {
                    "type": "object",
                    "properties": {
                        "status": {
                            "type": "integer",
                            "default": 422
                        },
                        "data": {
                            "type": "object",
                            "properties": {
                                "error": {
                                    "type": "object",
                                    "properties": {
                                        "status": {
                                            "type": "integer",
                                            "default": 422
                                        },
                                        "message": {
                                            "type": "object",
                                            "properties": {
                                                "parameters.operator.idLocal": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "default": [
                                                        "Missing data for required field."
                                                    ]
                                                },
                                                "parameters.operator.@type": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "default": [
                                                        "Missing data for required field."
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "parameters.operator.@type",
                                                "parameters.operator.idLocal"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "status"
                                    ]
                                }
                            },
                            "required": [
                                "error"
                            ]
                        }
                    },
                    "required": [
                        "data",
                        "status"
                    ]
                }
            },
            "required": [
                "message",
                "status",
                "translator_response"
            ]
        }
    },
    "required": [
        "error"
    ]
}</msg>
<status status="PASS" starttime="20200930 16:09:57.996" endtime="20200930 16:09:58.001"></status>
</kw>
<status status="PASS" starttime="20200930 16:09:57.654" endtime="20200930 16:09:58.001"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response status</arg>
<arg>502</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:58.001" endtime="20200930 16:09:58.002"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response body error status</arg>
<arg>502</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:58.002" endtime="20200930 16:09:58.003"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response body error translator_response status</arg>
<arg>422</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:58.003" endtime="20200930 16:09:58.004"></status>
</kw>
<kw name="String" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON string.*</doc>
<arguments>
<arg>response body error translator_response data error message parameters.operator.idLocal 0</arg>
<arg>Missing data for required field.</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:58.004" endtime="20200930 16:09:58.005"></status>
</kw>
<kw name="String" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON string.*</doc>
<arguments>
<arg>response body error translator_response data error message parameters.operator.@type 0</arg>
<arg>Missing data for required field.</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:58.005" endtime="20200930 16:09:58.006"></status>
</kw>
<tags>
<tag>bug-0005</tag>
</tags>
<status status="PASS" starttime="20200930 16:09:57.650" endtime="20200930 16:09:58.006" critical="yes"></status>
</test>
<test id="s1-t7" name="fetch, 422, Empty operator">
<kw name="Get Body">
<assign>
<var>${body}</var>
</assign>
<kw name="Copy Dictionary" library="Collections">
<doc>Returns a copy of the given dictionary.</doc>
<arguments>
<arg>${BROKER_BODY}</arg>
<arg>deepcopy=True</arg>
</arguments>
<assign>
<var>${body}</var>
</assign>
<msg timestamp="20200930 16:09:58.008" level="INFO">${body} = {'productCode': 'digitransit-4-test', 'parameters': {'operator': {'idLocal': '0022', '@type': 'Organization'}, 'vehicle': {'idLocal': '00876', '@type': 'Vehicle'}}}</msg>
<status status="PASS" starttime="20200930 16:09:58.008" endtime="20200930 16:09:58.008"></status>
</kw>
<kw name="Get Current Date" library="DateTime">
<doc>Returns current local or UTC time with an optional increment.</doc>
<arguments>
<arg>time_zone=UTC</arg>
<arg>result_format=%Y-%m-%dT%H:%M:%S+00:00</arg>
</arguments>
<assign>
<var>${now}</var>
</assign>
<msg timestamp="20200930 16:09:58.009" level="INFO">${now} = 2020-09-30T13:09:58+00:00</msg>
<status status="PASS" starttime="20200930 16:09:58.008" endtime="20200930 16:09:58.009"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>timestamp</arg>
<arg>${now}</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:58.009" endtime="20200930 16:09:58.009"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body}</arg>
<arg>&amp;{kwargs}</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:58.009" endtime="20200930 16:09:58.010"></status>
</kw>
<kw name="Evaluate" library="BuiltIn">
<doc>Evaluates the given expression in Python and returns the result.</doc>
<arguments>
<arg>json.dumps(${body})</arg>
<arg>json</arg>
</arguments>
<assign>
<var>${json_string}</var>
</assign>
<msg timestamp="20200930 16:09:58.010" level="INFO">${json_string} = {"productCode": "digitransit-4-test", "parameters": {"operator": {"idLocal": "0022", "@type": "Organization"}, "vehicle": {"idLocal": "00876", "@type": "Vehicle"}}, "timestamp": "2020-09-30T13:09:58+0...</msg>
<status status="PASS" starttime="20200930 16:09:58.010" endtime="20200930 16:09:58.010"></status>
</kw>
<msg timestamp="20200930 16:09:58.011" level="INFO">${body} = {'productCode': 'digitransit-4-test', 'parameters': {'operator': {'idLocal': '0022', '@type': 'Organization'}, 'vehicle': {'idLocal': '00876', '@type': 'Vehicle'}}, 'timestamp': '2020-09-30T13:09:58+0...</msg>
<status status="PASS" starttime="20200930 16:09:58.007" endtime="20200930 16:09:58.011"></status>
</kw>
<kw name="Set To Dictionary" library="Collections">
<doc>Adds the given ``key_value_pairs`` and ``items`` to the ``dictionary``.</doc>
<arguments>
<arg>${body["parameters"]}</arg>
<arg>vehicle=@{EMPTY}</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:58.011" endtime="20200930 16:09:58.011"></status>
</kw>
<kw name="Fetch Data Product">
<arguments>
<arg>${body}</arg>
</arguments>
<kw name="Calculate Pot Signature" library="PoTLib">
<arguments>
<arg>${body}</arg>
<arg>${CLIENT_SECRET}</arg>
</arguments>
<assign>
<var>${signature}</var>
</assign>
<msg timestamp="20200930 16:09:58.012" level="INFO">${signature} = MLeHOy6aByyTuBovHWnHnzguGs6GCM5X0+28KBdwpbQ=</msg>
<status status="PASS" starttime="20200930 16:09:58.012" endtime="20200930 16:09:58.012"></status>
</kw>
<kw name="Log" library="BuiltIn">
<doc>Logs the given message with the given level.</doc>
<arguments>
<arg>${signature}</arg>
</arguments>
<msg timestamp="20200930 16:09:58.013" level="INFO">MLeHOy6aByyTuBovHWnHnzguGs6GCM5X0+28KBdwpbQ=</msg>
<status status="PASS" starttime="20200930 16:09:58.012" endtime="20200930 16:09:58.013"></status>
</kw>
<kw name="Set Headers" library="REST">
<tags>
<tag>settings</tag>
</tags>
<doc>*Sets new request headers or updates the existing.*</doc>
<arguments>
<arg>{"x-pot-signature": "${signature}", "x-app-token": "${APP_TOKEN}"}</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:58.013" endtime="20200930 16:09:58.013"></status>
</kw>
<kw name="Post" library="REST">
<tags>
<tag>http</tag>
</tags>
<doc>*Sends a POST request to the endpoint.*</doc>
<arguments>
<arg>${API_PATH}</arg>
<arg>${body}</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:58.013" endtime="20200930 16:09:58.332"></status>
</kw>
<kw name="Output Schema" library="REST">
<tags>
<tag>I/O</tag>
</tags>
<doc>*Outputs JSON Schema to terminal or a file.*</doc>
<arguments>
<arg>response body</arg>
</arguments>
<msg timestamp="20200930 16:09:58.333" level="INFO">
{
    "type": "object",
    "properties": {
        "error": {
            "type": "object",
            "properties": {
                "message": {
                    "type": "string",
                    "default": "External translator returns an invalid response."
                },
                "status": {
                    "type": "integer",
                    "default": 502
                },
                "translator_response": {
                    "type": "object",
                    "properties": {
                        "status": {
                            "type": "integer",
                            "default": 422
                        },
                        "data": {
                            "type": "object",
                            "properties": {
                                "error": {
                                    "type": "object",
                                    "properties": {
                                        "status": {
                                            "type": "integer",
                                            "default": 422
                                        },
                                        "message": {
                                            "type": "object",
                                            "properties": {
                                                "parameters.vehicle.idLocal": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "default": [
                                                        "Missing data for required field."
                                                    ]
                                                },
                                                "parameters.vehicle.@type": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    },
                                                    "default": [
                                                        "Missing data for required field."
                                                    ]
                                                }
                                            },
                                            "required": [
                                                "parameters.vehicle.@type",
                                                "parameters.vehicle.idLocal"
                                            ]
                                        }
                                    },
                                    "required": [
                                        "message",
                                        "status"
                                    ]
                                }
                            },
                            "required": [
                                "error"
                            ]
                        }
                    },
                    "required": [
                        "data",
                        "status"
                    ]
                }
            },
            "required": [
                "message",
                "status",
                "translator_response"
            ]
        }
    },
    "required": [
        "error"
    ]
}</msg>
<status status="PASS" starttime="20200930 16:09:58.332" endtime="20200930 16:09:58.337"></status>
</kw>
<status status="PASS" starttime="20200930 16:09:58.011" endtime="20200930 16:09:58.337"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response status</arg>
<arg>502</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:58.338" endtime="20200930 16:09:58.338"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response body error status</arg>
<arg>502</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:58.339" endtime="20200930 16:09:58.339"></status>
</kw>
<kw name="Integer" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON integer.*</doc>
<arguments>
<arg>response body error translator_response status</arg>
<arg>422</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:58.340" endtime="20200930 16:09:58.340"></status>
</kw>
<kw name="String" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON string.*</doc>
<arguments>
<arg>response body error translator_response data error message parameters.vehicle.idLocal 0</arg>
<arg>Missing data for required field.</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:58.340" endtime="20200930 16:09:58.341"></status>
</kw>
<kw name="String" library="REST">
<tags>
<tag>assertions</tag>
</tags>
<doc>*Asserts the field as JSON string.*</doc>
<arguments>
<arg>response body error translator_response data error message parameters.vehicle.@type 0</arg>
<arg>Missing data for required field.</arg>
</arguments>
<status status="PASS" starttime="20200930 16:09:58.341" endtime="20200930 16:09:58.342"></status>
</kw>
<tags>
<tag>bug-0006</tag>
</tags>
<status status="PASS" starttime="20200930 16:09:58.007" endtime="20200930 16:09:58.342" critical="yes"></status>
</test>
<doc>Digitraffic Live Trains API - MQTT</doc>
<status status="PASS" starttime="20200930 16:09:53.682" endtime="20200930 16:09:58.344"></status>
</suite>
<statistics>
<total>
<stat pass="7" fail="0">Critical Tests</stat>
<stat pass="7" fail="0">All Tests</stat>
</total>
<tag>
<stat pass="2" fail="0">bug-0001</stat>
<stat pass="1" fail="0">bug-0002</stat>
<stat pass="1" fail="0">bug-0003</stat>
<stat pass="1" fail="0">bug-0004</stat>
<stat pass="1" fail="0">bug-0005</stat>
<stat pass="1" fail="0">bug-0006</stat>
</tag>
<suite>
<stat pass="7" fail="0" id="s1" name="Connector Tests">Connector Tests</stat>
</suite>
</statistics>
<errors>
<msg timestamp="20200930 16:09:58.007" level="WARN">Multiple test cases with name 'fetch, 422, Empty operator' executed in test suite 'Connector Tests'.</msg>
</errors>
</robot>
